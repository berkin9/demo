<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Order Panel</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h2 { margin-top: 30px; }
        ul { list-style: none; padding: 0; }
        li { border: 1px solid #ccc; padding: 10px; margin: 10px 0; }
        button { margin-top: 5px; }
    </style>
</head>
<body>
<h1>Order Panel</h1>

<h2>All Products</h2>
<ul>
    <li th:each="p : ${products}">
        <img th:src="${p.imagePath}" alt="Ürün Resmi" style="max-width:100px;"><br>
        <strong th:text="${p.name}"></strong><br>
        <span th:text="${#numbers.formatDecimal(p.price, 0, 'POINT', 2, 'POINT')} + ' ₺'"></span><br>

        <form th:action="@{/orders/cart/add}" method="post">
            <input type="hidden" name="productId" th:value="${p.id}">
            <input type="number" name="quantity" value="1" min="1" required>
            <button type="submit">Add to Cart</button>
        </form>

        <form th:action="@{/orders/favorites/toggle}" method="post">
            <input type="hidden" name="productId" th:value="${p.id}">
            <button type="submit" th:text="${favoriteProducts.contains(p)} ? '★ Remove Favorite' : '☆ Add Favorite'"></button>
        </form>
    </li>
</ul>

<h2>Shopping Cart</h2>
<ul>
    <li th:each="entry : ${cartProducts}">
        <img th:src="${entry.key.imagePath}" alt="Ürün Resmi" style="max-width:100px;"><br>
        <strong th:text="${entry.key.name}"></strong><br>
        Quantity: <span th:text="${entry.value}"></span><br>
        Price: <span th:text="${#numbers.formatDecimal(entry.key.price, 0, 'POINT', 2, 'POINT')} + ' ₺'"></span><br>
        Total: <span th:text="${#numbers.formatDecimal(entry.key.price * entry.value, 0, 'POINT', 2, 'POINT')} + ' ₺'"></span><br>

        <form th:action="@{/orders/cart/remove}" method="post">
            <input type="hidden" name="productId" th:value="${entry.key.id}">
            <button type="submit">Remove</button>
        </form>
    </li>
</ul>
<h3>Total Cart Price: <span th:text="${#numbers.formatDecimal(cartTotal, 0, 'POINT', 2, 'POINT')} + ' ₺'"></span></h3>

<h2>Favorite Products</h2>
<ul>
    <li th:each="fp : ${favoriteProducts}">
        <img th:src="${fp.imagePath}" alt="Ürün Resmi" style="max-width:100px;"><br>
        <strong th:text="${fp.name}"></strong><br>
        <span th:text="${#numbers.formatDecimal(fp.price, 0, 'POINT', 2, 'POINT')} + ' ₺'"></span><br>

        <form th:action="@{/orders/cart/add}" method="post">
            <input type="hidden" name="productId" th:value="${fp.id}">
            <input type="number" name="quantity" value="1" min="1" required>
            <button type="submit">Add to Cart</button>
        </form>

        <form th:action="@{/orders/favorites/remove}" method="post">
            <input type="hidden" name="productId" th:value="${fp.id}">
            <button type="submit">Remove from Favorites</button>
        </form>
    </li>
</ul>
</body>
</html>
